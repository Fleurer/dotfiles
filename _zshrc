# manually includes oh-my-zsh libs only
[[ -s "$HOME/.dotfiles/_zsh/git.zsh" ]] && source ~/.dotfiles/_zsh/git.zsh

# Use emacs keybindings even if our EDITOR is set to vi
bindkey -e

bindkey '^[[1;5C' forward-word
bindkey '^[[1;5D' backward-word

autoload -U select-word-style

# Keep 1000 lines of history within the shell and save it to ~/.zsh_history:
HISTSIZE=1000
SAVEHIST=1000
HISTFILE=~/.zsh_history

unsetopt correct_all

# Use modern completion system
autoload -Uz compinit
compinit

zstyle ':completion:*' auto-description 'specify: %d'
zstyle ':completion:*' completer _complete
zstyle ':completion:*' format ''
zstyle ':completion:*' group-name ''
zstyle ':completion:*' menu select=2
# eval "$(dircolors -b)"
zstyle ':completion:*:default' list-colors ${(s.:.)LS_COLORS}
zstyle ':completion:*' list-colors ''
zstyle ':completion:*' list-prompt %SAt %p: Hit TAB for more, or the character to insert%s
zstyle ':completion:*' matcher-list '' 'm:{a-z}={A-Z}' 'm:{a-zA-Z}={A-Za-z}' 'r:|[._-]=* r:|=* l:|=*'
zstyle ':completion:*' select-prompt %SScrolling active: current selection at %p%s
zstyle ':completion:*' menu select
zstyle ':completion:*' use-compctl false
zstyle ':completion:*' verbose true

zstyle ':completion:*:*:kill:*:processes' list-colors '=(#b) #([0-9]#)*=0=01;31'
zstyle ':completion:*:kill:*' command 'ps -u $USER -o pid,%cpu,tty,cputime,cmd'

# make it bash-like
setopt +o menucomplete
autoload -U compinstall
setopt no_auto_menu
setopt AUTO_LIST
setopt list_packed

# Set up the prompt
autoload -Uz promptinit
promptinit
prompt walters
setopt prompt_subst

#
autoload -U select-word-style
select-word-style bash

# get the colors
autoload colors zsh/terminfo
if [[ "$terminfo[colors]" -ge 8 ]]; then
   colors
fi

PROMPT_SUCCESS_COLOR=$FG[117]
PROMPT_FAILURE_COLOR=$FG[124]
PROMPT_VCS_INFO_COLOR=$FG[242]
PROMPT_PROMPT=$FG[077]
GIT_DIRTY_COLOR=$FG[133]
GIT_CLEAN_COLOR=$FG[118]
GIT_PROMPT_INFO=$FG[012]
ZSH_THEME_GIT_PROMPT_PREFIX=" ("
ZSH_THEME_GIT_PROMPT_SUFFIX="%{$GIT_PROMPT_INFO%})"
ZSH_THEME_GIT_PROMPT_DIRTY="%{$GIT_DIRTY_COLOR%}âœ˜"
ZSH_THEME_GIT_PROMPT_CLEAN=""

PROMPT='%{$fg[green]%}%n%{$fg[black]%}@%{$fg[red]%}%m%{$fg[black]%}:%{$fg[white]%}%4~%{$fg[yellow]%}$(git_prompt_info)%{$reset_color%}
$ '
RPROMPT='%{$fg[white]%}%1(j.%j.)'

source ~/.bash_common
# source `brew --prefix`/etc/profile.d/z.sh

# compatible with rake
alias rake='noglob rake'
export PATH="/usr/local/opt/qt/bin:$PATH"
